[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Rafael dos Santos Peixoto",
    "section": "",
    "text": "Me in Chicago for the Brazilian Studies Association Summit."
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "During my Ph.D., I aim to continue working with spatial omics data but focusing more on its biological significance. I also want to connect with other Brazilian students in the US and advertise the opportunities available here. Finally, another goal of mine is to make science available to a broader audience by making my code reproducible and by expressing my research in common terms."
  },
  {
    "objectID": "data_analysis.html",
    "href": "data_analysis.html",
    "title": "Data Analysis",
    "section": "",
    "text": "This analysis was made to anyone who knows what soccer is! The data used was collected by Adão Duque and it is available on his github repo and also on kaggle. It shows the information of the 7645 Brazilian League matches between the years of 2003 and 2021. In addition, it also presents some statistics for these games. A file called Legenda.txt includes the dictionary for the data.\nFirst, we load the data for the matches, select and rename (to English) the columns used in this data and select the last 5 years.\n\nlibrary(tidyverse)\n\n\nmatches <- read_csv(\"data/br/campeonato-brasileiro-full.csv\", show_col_types = FALSE) %>% \n    select(c(data, mandante, visitante, vencedor, mandante_placar, visitante_placar)) %>% \n    rename(date = data,\n           home = mandante,\n           away = visitante,\n           winner = vencedor,\n           home_score = mandante_placar,\n           away_score = visitante_placar) %>% \n    filter(date > \"2016-01-01\")\n    \nmatches\n\n# A tibble: 2,279 × 6\n   date       home          away         winner      home_score away_score\n   <date>     <chr>         <chr>        <chr>            <dbl>      <dbl>\n 1 2016-05-14 Palmeiras     Athletico-PR Palmeiras            4          0\n 2 2016-05-14 Flamengo      Sport        Flamengo             1          0\n 3 2016-05-14 Atletico-MG   Santos       Atletico-MG          1          0\n 4 2016-05-14 Coritiba      Cruzeiro     Coritiba             1          0\n 5 2016-05-15 Santa Cruz    Vitoria      Santa Cruz           4          1\n 6 2016-05-15 Botafogo-RJ   Sao Paulo    Sao Paulo            0          1\n 7 2016-05-15 Figueirense   Ponte Preta  -                    0          0\n 8 2016-05-15 Corinthians   Gremio       -                    0          0\n 9 2016-05-15 America-MG    Fluminense   Fluminense           0          1\n10 2016-05-15 Internacional Chapecoense  -                    0          0\n# … with 2,269 more rows\n\n\nNow, we will create a column for the team and the condition it player. Then we will create columns for the number of points awarded in each game. If a team wins it gets 3 points, if it draws it gets 1 point, if it looses 0 points. We will also create a column for the season (year).\n\nmatches_transformed <- matches %>% select(date, home, away, winner) %>% \n    pivot_longer(cols = c(home, away), values_to = \"team\", names_to = \"location\") %>%\n    mutate(points = case_when(winner == team ~ 3,\n                              winner == \"-\" ~ 1,\n                              TRUE ~ 0),\n           victory = case_when(winner == team ~ 1,\n                              TRUE ~ 0),\n           draw = case_when(winner == \"-\" ~ 1,\n                            TRUE ~ 0),\n           year = format(date, \"%Y\"))\n\nmatches_transformed\n\n# A tibble: 4,558 × 8\n   date       winner      location team         points victory  draw year \n   <date>     <chr>       <chr>    <chr>         <dbl>   <dbl> <dbl> <chr>\n 1 2016-05-14 Palmeiras   home     Palmeiras         3       1     0 2016 \n 2 2016-05-14 Palmeiras   away     Athletico-PR      0       0     0 2016 \n 3 2016-05-14 Flamengo    home     Flamengo          3       1     0 2016 \n 4 2016-05-14 Flamengo    away     Sport             0       0     0 2016 \n 5 2016-05-14 Atletico-MG home     Atletico-MG       3       1     0 2016 \n 6 2016-05-14 Atletico-MG away     Santos            0       0     0 2016 \n 7 2016-05-14 Coritiba    home     Coritiba          3       1     0 2016 \n 8 2016-05-14 Coritiba    away     Cruzeiro          0       0     0 2016 \n 9 2016-05-15 Santa Cruz  home     Santa Cruz        3       1     0 2016 \n10 2016-05-15 Santa Cruz  away     Vitoria           0       0     0 2016 \n# … with 4,548 more rows\n\n\nNow, we will see the top 5 teams per points. This information will be useful to filter the data when plotting the scores by team, since showing all 20 teams would cause confusion.\n\nmatches_transformed %>% \n    group_by(team) %>% \n    summarize(sum_points = sum(points)) %>% \n    arrange(desc(sum_points)) %>% \n    top_n(5)\n\n# A tibble: 5 × 2\n  team        sum_points\n  <chr>            <dbl>\n1 Flamengo           431\n2 Palmeiras          421\n3 Atletico-MG        375\n4 Santos             362\n5 Gremio             348\n\n\nThe previous information might mislead you into thinking that Flamengo is the best team, but this is not true since one team can score a lot of points in one year and not as much in the others. That is where data visualization comes in.\n\nmatches_transformed %>% \n    group_by(team, year) %>% \n    summarize(sum_points = sum(points)) %>% \n    filter(team %in% c(\"Palmeiras\", \"Flamengo\", \"Atletico-MG\", \"Santos\", \"Gremio\")) %>% \n    ggplot(aes(x=year, y=sum_points, color=team)) +\n        geom_point() +\n        labs(title=\"Points per year in the Brazilian League\", \n             subtitle=\"Points of the top 5 teams since 2016\",\n             caption=\"Palmeiras and Flamengo the same amount of titles.\",\n             x=\"Season\", y=\"Points\", color=\"Team\")\n\n\n\n\nIn this period, Palmeiras and Flamengo won the league twice (in 2017 another team won, but it was not on the top 5). Therefore, they are the most successful teams in the league and will be the focus of this analysis. Now we plot the percentage of wins, draws and losses.\n\nmatches_transformed %>% \n    group_by(team, year) %>% \n    summarize(n_victories=sum(victory), n_draws=sum(draw)) %>% \n    mutate(n_losses=(38-n_victories-n_draws)) %>% # there are 38 games in total\n    filter(team %in% c(\"Palmeiras\", \"Flamengo\")) %>% \n    pivot_longer(c(n_victories, n_draws, n_losses), values_to=\"n_results\", names_to=\"results\") %>% \n    ggplot(aes(x=team, y=n_results, fill=results)) +\n        geom_bar(position=\"stack\", stat = \"identity\") +\n        facet_wrap(. ~ year) + \n        labs(title=\"Results per year in the Brazilian League\", \n             subtitle=\"Results for Flamengo and Palmeiras since 2016\",\n             caption=\"The teams overcame each other in the same amount of seasons.\",\n             x=\"Team\", y=\"Number of Matches\", fill=\"Result\") +\n        scale_fill_discrete(labels=c('Draw', 'Loss', 'Win'))"
  }
]